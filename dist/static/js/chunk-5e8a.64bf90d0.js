(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5e8a"],{GiAY:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("t3Un");function a(e){return Object(i.a)({url:"/api/sys/office/list",method:"get",params:{id:e}})}function o(e){return Object(i.a)({url:"/api/sys/office/childs",method:"get",params:{pid:e}})}},KZEO:function(e,t,n){},RzZD:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"i",function(){return r}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"j",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return m});var i=n("t3Un");function a(e){return Object(i.a)({url:"/api/res/river/list",method:"get",params:e})}function o(e){return Object(i.a)({url:"/api/res/river/get",method:"get",params:{id:e}})}function r(e){return Object(i.a)({url:"/api/res/river/save",method:"post",data:e})}function l(e){return Object(i.a)({url:"/api/res/river/del",method:"post",params:{ids:e}})}function s(){return Object(i.a)({url:"/api/res/river/sxlist",method:"get",params:{type:"SX"}})}function u(){return Object(i.a)({url:"/api/res/river/tree",method:"get"})}function c(e){return Object(i.a)({url:"/c/common/fileRecord/getFiles",method:"get",params:e})}function d(e){return Object(i.a)({url:"/c/common/fileRecord/del",method:"post",data:e})}function p(e){return Object(i.a)({url:"api/res/management/managementuserlist",method:"get",params:e})}function m(e){return Object(i.a)({url:"api/res/river/usermanagentriver",method:"get",params:e})}},Y5bG:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),Math.easeInOutQuad=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-a,r=0;t=void 0===t?500:t;!function e(){r+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(r,a,o,t)),r<t?i(e):n&&"function"==typeof n&&n()}()}},ef4g:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("vDqi"),a=n.n(i),o=n("X4fA");function r(e,t){var n=new FormData;for(var i in t)t[i].raw&&n.append("file"+i,t[i].raw);return a()({url:"http://117.26.177.186:8090/admin/c/common/fileRecord/uploadFile/?token="+Object(o.a)()+e,method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})}},iQb1:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("t3Un");function a(e){return Object(i.a)({url:"/api/sys/area/tree",method:"get",params:{pid:e}})}},sqUd:function(e,t,n){"use strict";n.r(t);var i=n("Mz3J"),a=n("t3Un");var o=n("4A2f"),r=n("UjA4"),l=n("X4fA"),s=n("RzZD"),u=n("vc+U"),c=n("hWHG"),d=n("ef4g"),p={components:{Pagination:i.a,RmDict:o.a,RmOrgSelect:r.a,RmUserSelect:u.a,RmAreaSelect:c.a},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{v:{form:!1,loading:!1},list:null,fileList:[],doUpload:Object({NODE_ENV:"production",ENV_CONFIG:"prod",BASE_API:"http://117.26.177.186:8090/admin",GEOSERVER:"http://117.26.177.186:8090/geoserver/",GEOSERVER2:"http://117.40.230.32:10103/geoserver/",MAP_CENTER:[119.532727,26.666832],MAP_ZOOM:14}).BASE_FILE_API+"?token="+Object(l.a)(),value1:"",value2:"",popoverVisible:!1,query:{total:0,pageNo:1,pageSize:10,search:void 0,type:void 0,starttime:null,endtime:null},uploaddata:{bizId:null,bizType:"msg"},form:{type:"2",title:null,content:null,from:null,userType:null,userDesc:null,userData:null,ticket:null,status:null,sendTime:null,sendState:"2",remark:null},multipleSelection:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;if(this.query.starttime>this.query.endtime)return this.popoverVisible=!0,void setTimeout(function(){e.popoverVisible=!1},1500);this.v.loading=!0,function(e){return Object(a.a)({url:"/api/sysMsg/list",method:"get",params:e})}(this.query).then(function(t){e.v.loading=!1,e.list=t.data.list,e.query.total=t.data.count})},start:function(e){this.query.starttime=e},end:function(e){this.query.endtime=e},handleFilter:function(){this.query.pageNo=1,this.getList()},create:function(){this.fileList=[],this.v.form=!0,this.form={}},edit:function(e){var t=this;this.v.form=!0,this.form=e,Object(s.e)({bizId:this.form.id}).then(function(e){t.fileList=e.data})},handleSuccess:function(){this.fileList=[],this.getList()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisibleImg=!0},handleRemove:function(e,t){console.log(e,t)},removefile:function(e){Object(s.b)({ids:e.id}).then(function(e){console.log("图片删除成功!!!!!")})},save:function(){var e=this;this.form.sendState="2",function(e){return Object(a.a)({url:"/api/sysMsg/save",method:"post",data:e})}(this.form).then(function(t){if(e.uploaddata.bizId=t.data.id,void 0!==e.$refs.upload.uploadFiles&&e.$refs.upload.uploadFiles.length>0){var n="&bizType="+e.uploaddata.bizType+"&bizId="+e.uploaddata.bizId;Object(d.a)(n,e.$refs.upload.uploadFiles).then(function(e){console.log("file----res",e)}).catch(function(e){})}else e.getList();e.v.form=!1,t.success?(e.$message({message:t.msg,type:"success"}),e.getList()):e.$message({message:t.msg,type:"warn"})})},handleSelectionChange:function(e){this.multipleSelection=e},del:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.map(function(e){t.push(e.id)});var n=t.join();console.log("idStr",n),this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(a.a)({url:"/api/sysMsg/del",method:"post",params:{ids:e}})})(n).then(function(t){e.getList(),e.$message({type:"success",message:t.msg})}).catch(function(t){e.$message({type:"warn",message:t})})}).catch(function(){})}else this.$message({type:"warning",message:"请先勾选!"})},deleteBtn:function(){}}},m=(n("wCeo"),n("KHd+")),f=Object(m.a)(p,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.v.loading,expression:"v.loading"}]},[n("el-container",[n("el-header",{attrs:{height:"125px"}},[n("div",{staticClass:"topTitle"},[e._v("通知公告列表")]),e._v(" "),n("div",{staticClass:"filter-container"},[[n("div",{staticClass:"block"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"210px"},attrs:{placeholder:"输入内容搜索..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.query.title,callback:function(t){e.$set(e.query,"title",t)},expression:"query.title"}}),e._v(" "),n("span",[e._v("时间段")]),e._v(" "),n("el-date-picker",{attrs:{type:"date","value-format":"timestamp",size:"mini",placeholder:"开始日期"},on:{change:e.start},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),n("span",[e._v(" — ")]),e._v(" "),n("el-date-picker",{attrs:{type:"date","value-format":"timestamp",size:"mini",placeholder:"结束日期"},on:{change:e.end},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._v(" "),n("el-popover",{attrs:{placement:"right-start",title:"",width:"200",trigger:"manual",content:"结束时间需大于开始时间。"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleFilter},slot:"reference"},[e._v("查询")])],1)],1)]],2)]),e._v(" "),n("el-main",[n("div",{staticClass:"filter-container",staticStyle:{"padding-top":"0"}},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.create}},[e._v("新增公告")]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createByName",label:"发起人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"sendTime",label:"发起时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(n){e.edit(t.row)}}})]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.query.total>0,expression:"query.total>0"}],attrs:{total:e.query.total,page:e.query.pageNo,limit:e.query.pageSize},on:{"update:page":function(t){e.$set(e.query,"pageNo",t)},"update:limit":function(t){e.$set(e.query,"pageSize",t)},pagination:e.getList}})],1)])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.v.form,title:"编辑"},on:{"update:visible":function(t){e.$set(e.v,"form",t)}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"40px"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),n("el-upload",{ref:"upload",staticClass:"elUpload",attrs:{action:e.doUpload,"list-type":"picture-card","auto-upload":!1,"on-preview":e.handlePictureCardPreview,accept:".jpg, .jpeg, .png, .gif","file-list":e.fileList,"before-remove":e.removefile,data:e.uploaddata,"on-success":e.handleSuccess,"on-remove":e.handleRemove}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.v.form=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"3970c431",null);f.options.__file="msg.vue";t.default=f.exports},wCeo:function(e,t,n){"use strict";var i=n("KZEO");n.n(i).a}}]);