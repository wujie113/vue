(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7733"],{"6DqS":function(e,t,n){},GiAY:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var a=n("t3Un");function i(e){return Object(a.a)({url:"/api/sys/office/list",method:"get",params:{id:e}})}function o(e){return Object(a.a)({url:"/api/sys/office/childs",method:"get",params:{pid:e}})}function r(e){return Object(a.a)({url:"/api/res/management/loweroffice",method:"get",params:e})}},Iwmq:function(e,t,n){"use strict";n.r(t);var a=n("Mz3J"),i=n("t3Un");var o=n("4A2f"),r=n("UjA4"),s=n("vc+U"),l=n("hWHG"),c=n("b/QD"),u={components:{Pagination:a.a,RmDict:o.a,RmOrgSelect:r.a,RmUserSelect:s.a,RmAreaSelect:l.a},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{v:{form:!1,loading:!1},listLoading:!0,list:null,checked:!1,dataArray:[],defaultProps:{children:"children",label:"label"},lowerofficeList:null,query:{unit:void 0,total:0,pageNo:1,pageSize:10,search:void 0,type:void 0},form:{name:null,phone:null,unit:null,sort:null,state:null},multipleSelection:[]}},created:function(){this.loadLeftTree()},methods:{loadLeftTree:function(){var e=this;Object(c.h)().then(function(t){var n=t.data.list;e.dataArray=n,e.unit=n[0].label,e.companyID=n[0].id,e.getList()}).catch(function(e){console.error("errror:::::::",e)})},getList:function(){var e=this;this.listLoading=!0,console.log("this.query::::",this.query),function(e){return Object(i.a)({url:"/api/sys/addressbook/list",method:"get",params:e})}(this.query).then(function(t){e.listLoading=!1,e.list=t.data.list,e.query.total=t.data.count}),Object(c.d)().then(function(t){e.lowerofficeList=t.data.list})},onlyShowSelectBtn:function(){this.handleNodeClick(this.officeData)},handleNodeClick:function(e){console.log("节点信息",e),this.officeData=e,this.companyID=e.id,this.checked?(this.query.unit=e.id,this.query.areaId=null):(this.query.areaId=e.area.id,this.query.unit=null),this.getList()},searchBtn:function(){this.query.pageNo=1,this.getList()},create:function(){this.v.form=!0,this.form={}},edit:function(e){this.v.form=!0,this.form=e,console.log("this.form",this.form)},save:function(){var e=this;(function(e){return Object(i.a)({url:"/api/sys/addressbook/save",method:"post",data:e})})(this.form).then(function(t){e.v.form=!1,t.success?(e.$message({message:t.msg,type:"success"}),e.list.unshift(e.form)):e.$message({message:t.msg,type:"warning"})})},handleSelectionChange:function(e){this.multipleSelection=e},del:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.map(function(e){t.push(e.id)});var n=t.join();this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(i.a)({url:"/api/sys/addressbook/del",method:"post",params:{ids:e}})})(n).then(function(t){e.getList(),e.$message({type:"success",message:t.msg})}).catch(function(t){e.$message({type:"warning",message:t})})}).catch(function(){})}else this.$message({type:"warn",message:"请先勾选!"})}}},d=(n("f/DN"),n("kcg+"),n("KHd+")),m=Object(d.a)(u,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[n("el-aside",[n("div",{staticClass:"panel"},[n("div",{staticClass:"panelHeading"},[n("div",[e._v("单位")]),e._v(" "),n("div",[n("el-checkbox",{on:{change:function(t){e.onlyShowSelectBtn()}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("仅显示所选单位")])],1)]),e._v(" "),n("div",{staticClass:"source panel-body"},[n("el-tree",{attrs:{data:e.dataArray,props:e.defaultProps,"empty-text":"暂无数据","highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)])]),e._v(" "),n("el-container",[n("el-header",{attrs:{height:"125px"}},[n("div",{staticClass:"topTitle"},[e._v("通讯录列表")]),e._v(" "),n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"210px"},attrs:{placeholder:"输入姓名、单位或电话搜索..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchBtn(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchBtn}},[e._v("查询")])],1)]),e._v(" "),n("el-main",[n("div",{staticClass:"filter-container",staticStyle:{"padding-top":"0"}},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.create}},[e._v("新增")]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"电话"}}),e._v(" "),n("el-table-column",{attrs:{prop:"unitName",label:"单位"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(n){e.edit(t.row)}}})]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.query.total>0,expression:"query.total>0"}],attrs:{total:e.query.total,page:e.query.pageNo,limit:e.query.pageSize},on:{"update:page":function(t){e.$set(e.query,"pageNo",t)},"update:limit":function(t){e.$set(e.query,"pageSize",t)},pagination:e.getList}})],1)])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.v.form,title:"编辑"},on:{"update:visible":function(t){e.$set(e.v,"form",t)}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"单位"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择单位",clearable:""},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.lowerofficeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.v.form=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"32e1afa0",null);m.options.__file="addressBook.vue";t.default=m.exports},QXss:function(e,t,n){},Y5bG:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),Math.easeInOutQuad=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function i(e,t,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-i,r=0;t=void 0===t?500:t;!function e(){r+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(r,i,o,t)),r<t?a(e):n&&"function"==typeof n&&n()}()}},"b/QD":function(e,t,n){"use strict";n.d(t,"j",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"i",function(){return f});var a=n("t3Un");function i(e){return Object(a.a)({url:"api/res/management/saveusers",method:"post",data:e})}function o(e){return Object(a.a)({url:"api/res/management/managementuserlist",method:"get",params:e})}function r(e){var t={ids:e};return console.log("params:::",t),Object(a.a)({url:"api/res/management/del",method:"get",params:t})}function s(e){return Object(a.a)({url:"api/res/management/gethzbuserbyareaid",method:"get",params:e})}function l(e){return Object(a.a)({url:"api/res/management/orgusertrees",method:"get",params:e})}function c(e){return Object(a.a)({url:"/api/res/management/orgtreesandusers",method:"get",params:e})}function u(e){return Object(a.a)({url:"/api/res/management/orgtrees",method:"get",params:e})}function d(e){return Object(a.a)({url:"/api/res/management/synerg/office",method:"get",params:e})}function m(e){return Object(a.a)({url:"/api/res/management/loweroffice",method:"get",params:e})}function f(e){return Object(a.a)({url:"/api/sysMsg/saveExposure",method:"post",data:e})}},"f/DN":function(e,t,n){"use strict";var a=n("6DqS");n.n(a).a},iQb1:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("t3Un");function i(e,t){return void 0==t&&(t=null),Object(a.a)({url:"api/res/management/tree",method:"get",params:{pid:e,iscontains:t}})}},"kcg+":function(e,t,n){"use strict";var a=n("QXss");n.n(a).a}}]);