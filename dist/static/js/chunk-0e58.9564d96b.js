(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e58"],{"1Cks":function(e,t,i){},Bc63:function(e,t,i){},GiAY:function(e,t,i){"use strict";i.d(t,"c",function(){return a}),i.d(t,"a",function(){return r}),i.d(t,"b",function(){return o});var n=i("t3Un");function a(e){return Object(n.a)({url:"/api/sys/office/list",method:"get",params:{id:e}})}function r(e){return Object(n.a)({url:"/api/sys/office/childs",method:"get",params:{pid:e}})}function o(e){return Object(n.a)({url:"/api/res/management/loweroffice",method:"get",params:e})}},RzZD:function(e,t,i){"use strict";i.d(t,"d",function(){return a}),i.d(t,"c",function(){return r}),i.d(t,"i",function(){return o}),i.d(t,"a",function(){return s}),i.d(t,"h",function(){return l}),i.d(t,"j",function(){return c}),i.d(t,"e",function(){return u}),i.d(t,"b",function(){return d}),i.d(t,"f",function(){return p}),i.d(t,"g",function(){return m});var n=i("t3Un");function a(e){return Object(n.a)({url:"/api/res/river/list",method:"get",params:e})}function r(e){return Object(n.a)({url:"/api/res/river/get",method:"get",params:{id:e}})}function o(e){return Object(n.a)({url:"/api/res/river/save",method:"post",data:e})}function s(e){return Object(n.a)({url:"/api/res/river/del",method:"post",params:{ids:e}})}function l(){return Object(n.a)({url:"/api/res/river/sxlist",method:"get",params:{type:"SX"}})}function c(){return Object(n.a)({url:"/api/res/river/tree",method:"get"})}function u(e){return Object(n.a)({url:"/c/common/fileRecord/getFiles",method:"get",params:e})}function d(e){return Object(n.a)({url:"/c/common/fileRecord/del",method:"post",data:e})}function p(e){return Object(n.a)({url:"api/res/management/managementuserlist",method:"get",params:e})}function m(e){return Object(n.a)({url:"api/res/river/usermanagentriver",method:"get",params:e})}},Y5bG:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),Math.easeInOutQuad=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,i){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,r=e-a,o=0;t=void 0===t?500:t;!function e(){o+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(o,a,r,t)),o<t?n(e):i&&"function"==typeof i&&i()}()}},"b/QD":function(e,t,i){"use strict";i.d(t,"j",function(){return a}),i.d(t,"g",function(){return r}),i.d(t,"a",function(){return o}),i.d(t,"f",function(){return s}),i.d(t,"b",function(){return l}),i.d(t,"c",function(){return c}),i.d(t,"h",function(){return u}),i.d(t,"e",function(){return d}),i.d(t,"d",function(){return p}),i.d(t,"i",function(){return m});var n=i("t3Un");function a(e){return Object(n.a)({url:"api/res/management/saveusers",method:"post",data:e})}function r(e){return Object(n.a)({url:"api/res/management/managementuserlist",method:"get",params:e})}function o(e){var t={ids:e};return console.log("params:::",t),Object(n.a)({url:"api/res/management/del",method:"get",params:t})}function s(e){return Object(n.a)({url:"api/res/management/gethzbuserbyareaid",method:"get",params:e})}function l(e){return Object(n.a)({url:"api/res/management/orgusertrees",method:"get",params:e})}function c(e){return Object(n.a)({url:"/api/res/management/orgtreesandusers",method:"get",params:e})}function u(e){return Object(n.a)({url:"/api/res/management/orgtrees",method:"get",params:e})}function d(e){return Object(n.a)({url:"/api/res/management/synerg/office",method:"get",params:e})}function p(e){return Object(n.a)({url:"/api/res/management/loweroffice",method:"get",params:e})}function m(e){return Object(n.a)({url:"/api/sysMsg/saveExposure",method:"post",data:e})}},ef4g:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("vDqi"),a=i.n(n),r=i("X4fA");function o(e,t){var i=new FormData;for(var n in t)t[n].raw&&i.append("file"+n,t[n].raw);return a()({url:"http://117.26.177.186:8090/admin/c/common/fileRecord/uploadFile/?token="+Object(r.a)()+e,method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}})}},iQb1:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("t3Un");function a(e,t){return void 0==t&&(t=null),Object(n.a)({url:"api/res/management/tree",method:"get",params:{pid:e,iscontains:t}})}},jatR:function(e,t,i){"use strict";var n=i("Bc63");i.n(n).a},qjge:function(e,t,i){"use strict";i.r(t);var n=i("Mz3J"),a=i("t3Un");var r=i("4A2f"),o=i("UjA4"),s=(i("X4fA"),i("RzZD")),l=i("vc+U"),c=i("hWHG"),u=i("ef4g"),d=i("b/QD"),p=i("t0nZ"),m={components:{Pagination:n.a,RmDict:r.a,RmOrgSelect:o.a,RmUserSelect:l.a,RmAreaSelect:c.a,LeftTree:p.a},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{v:{loading:!1},list:null,exposureVisible:!1,exposureLoading:!1,exposuredataArray:[],isShowTabbar:!1,isshowCheckbox:!0,panelMinHeight:62,panelbodyHeight:62,refLeftTree:null,receivedPersionNodes:[],fileList:[],value1:"",value2:"",popoverVisible:!1,exposureForm:{title:"",content:"",userDataId:"",bizId:""},query:{total:0,pageNo:1,pageSize:10,search:void 0,type:"5",starttime:null,endtime:null},uploadParams:{bizId:"",bizType:"R"},baoguangid:{id:""},form:{type:"5",title:null,content:null,from:null,userType:null,userDesc:null,userData:null,ticket:null,status:null,sendTime:null,sendState:"2",remark:null},multipleSelection:[]}},created:function(){this.getList(),this.loadLeftTreeData()},methods:{loadLeftTreeData:function(){var e=this;Object(d.c)().then(function(t){e.exposuredataArray=t.data.list,e.exposureLoading=!1}).catch(function(t){e.exposureLoading=!1})},getList:function(){var e=this;if(this.query.starttime>this.query.endtime)return this.popoverVisible=!0,void setTimeout(function(){e.popoverVisible=!1},1500);this.v.loading=!0,function(e){return Object(a.a)({url:"/api/sysMsg/list",method:"get",params:e})}(this.query).then(function(t){e.v.loading=!1,e.list=t.data.list,e.query.total=t.data.count})},handleFilter:function(){this.query.pageNo=1,this.getList()},create:function(){this.exposureForm.title="",this.exposureForm.content="",this.loadLeftTreeData(),this.exposureLoading=!0,this.exposureVisible=!0,this.receivedPersionNodes=[],this.refLeftTree.setCheckedKeys([]),this.fileList=[]},start:function(e){this.query.starttime=e},end:function(e){this.query.endtime=e},submitBtn:function(){var e=this,t={id:this.baoguangid.id,userData:this.exposureForm.userDataId,title:this.exposureForm.title,content:this.exposureForm.content};console.log("saveParams",t),Object(d.i)(t).then(function(t){e.uploadParams.bizId=t.data.id,console.log("this.uploadParams.bizId",e.uploadParams.bizId);var i="&bizType="+e.uploadParams.bizType+"&bizId="+e.uploadParams.bizId;Object(u.a)(i,e.$refs.upload.uploadFiles).then(function(t){e.exposureVisible=!1}).catch(function(t){e.exposureVisible=!1}),e.getList()}).catch(function(t){e.exposureVisible=!1})},deleteNode:function(e){console.log("this.receivedPersionNodes",this.receivedPersionNodes),this.receivedPersionNodes.splice(e,1),this.receivedPersionKeys.splice(e,1),this.exposureForm.userDataId=this.receivedPersionKeys.join(","),this.refLeftTree.setCheckedKeys(this.receivedPersionKeys)},aa:function(e,t){for(var i in t)if(t[i]==e)return!0},getCity:function(e,t,i){if(void 0===i)i=new Array;for(var n in t)this.aa(t[n].id,e)&&i.push(t[n]),void 0!==t[n].children&&this.getCity(e,t[n].children,i);return i},edit:function(e){var t=this;if(console.log("row",e),this.baoguangid.id=e.id,this.exposureVisible=!0,this.exposureForm=e,this.receivedPersionNodes=[],this.fileList=[],Object(s.e)({bizId:e.id}).then(function(e){t.fileList=e.list,console.log(" this.fileList",t.fileList)}),e.userData){var i=e.userData.split(",");this.exposureForm.userDataId=e.userData,this.receivedPersionKeys=i,setTimeout(function(){t.refLeftTree.setCheckedKeys(i),t.receivedPersionNodes=t.getCity(i,t.exposuredataArray)},1e3)}else setTimeout(function(){t.refLeftTree.setCheckedKeys([])},1e3)},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleRemove:function(e,t){console.log("----=====",e),Object(s.b)({ids:e.id}).then(function(e){}).catch()},save:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;this.form.sendState="2",save(this.form).then(function(t){if(e.uploaddata.bizId=t.data.id,void 0!==e.$refs.upload.uploadFiles&&e.$refs.upload.uploadFiles.length>0){var i="&bizType="+e.uploaddata.bizType+"&bizId="+e.uploaddata.bizId;Object(u.a)(i,e.$refs.upload.uploadFiles).then(function(e){console.log("file----res",e)}).catch(function(e){})}else e.getList();e.v.form=!1,t.success?(e.$message({message:t.msg,type:"success"}),e.getList()):e.$message({message:t.msg,type:"warning"})})}),handleSelectionChange:function(e){this.multipleSelection=e},checkBoxBtn:function(e,t){var i=this;console.log(e,t),this.receivedPersionNodes=[],this.receivedPersionKeys=[],t.checkedNodes.map(function(e,t){"u"===e.type&&(i.receivedPersionNodes.push(e),i.receivedPersionKeys.push(e.id))}),this.exposureForm.userDataId=this.receivedPersionKeys.join(",")},selectNode:function(e){console.log("点击树形data",e)},del:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.map(function(e){t.push(e.id)});var i=t.join();console.log("idStr",i),this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(a.a)({url:"/api/sysMsg/del",method:"post",params:{ids:e}})})(i).then(function(t){e.getList(),e.$message({type:"success",message:t.msg})}).catch(function(t){e.$message({type:"warn",message:t})})}).catch(function(){})}else this.$message({type:"warning",message:"请先勾选!"})},deleteBtn:function(){}}},f=(i("rxze"),i("KHd+")),h=Object(f.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.v.loading,expression:"v.loading"}]},[i("el-container",[i("el-header",{attrs:{height:"125px"}},[i("div",{staticClass:"topTitle"},[e._v("曝光列表")]),e._v(" "),i("div",{staticClass:"filter-container"},[[i("div",{staticClass:"block"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"210px"},attrs:{placeholder:"输入内容搜索..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.query.title,callback:function(t){e.$set(e.query,"title",t)},expression:"query.title"}}),e._v(" "),i("span",[e._v("时间段")]),e._v(" "),i("el-date-picker",{attrs:{type:"date","value-format":"timestamp",size:"mini",placeholder:"开始日期"},on:{change:e.start},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),i("span",[e._v("-")]),e._v(" "),i("el-date-picker",{attrs:{type:"date","value-format":"timestamp",size:"mini",placeholder:"结束日期"},on:{change:e.end},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._v(" "),i("el-popover",{attrs:{placement:"right-start",title:"",width:"200",trigger:"manual",content:"结束时间需大于开始时间。"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleFilter},slot:"reference"},[e._v("查询")])],1)],1)]],2)]),e._v(" "),i("el-main",[i("div",{staticClass:"filter-container",staticStyle:{"padding-top":"0"}},[i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.create}},[e._v("新增曝光")]),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createByName",label:"发起人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sendTime",label:"发起时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(i){e.edit(t.row)}}})]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.query.total>0,expression:"query.total>0"}],attrs:{total:e.query.total,page:e.query.pageNo,limit:e.query.pageSize},on:{"update:page":function(t){e.$set(e.query,"pageNo",t)},"update:limit":function(t){e.$set(e.query,"pageSize",t)},pagination:e.getList}})],1)])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.exposureVisible,title:"曝光","modal-append-to-body":!1,width:"60%"},on:{"update:visible":function(t){e.exposureVisible=t}}},[i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.exposureLoading,expression:"exposureLoading"}]},[i("el-aside",[i("left-tree",{attrs:{titleName:"组织部门",dataArray:e.exposuredataArray,isShowTabbar:e.isShowTabbar,showCheckbox:e.isshowCheckbox,panelMinHeight:e.panelMinHeight,panelbodyHeight:e.panelbodyHeight},on:{areaData:e.selectNode,checkBoxBtn:e.checkBoxBtn},model:{value:e.refLeftTree,callback:function(t){e.refLeftTree=t},expression:"refLeftTree"}})],1),e._v(" "),i("el-container",[i("el-header",{attrs:{height:"200px"}},[i("div",{staticClass:"topTitle"},[e._v("接收列表")]),e._v(" "),i("div",{staticClass:"filter-container",staticStyle:{height:"157px","overflow-y":"auto"}},e._l(e.receivedPersionNodes,function(t,n){return i("span",{key:n,staticClass:"command-user"},[e._v("\n              "+e._s(t.label)+"\n              "),i("i",{staticClass:"el-icon-ali-guanbi",on:{click:function(t){e.deleteNode(n)}}})])}))]),e._v(" "),i("el-main",{staticStyle:{"padding-top":"0",position:"relative"}},[i("div",{staticClass:"topTitle"},[e._v("曝光详情")]),e._v(" "),i("div",{staticClass:"filter-container",staticStyle:{height:"276px","overflow-y":"auto"}},[i("el-form",{ref:"exposureForm",attrs:{model:e.exposureForm,"label-width":"50px"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{placeholder:"请输入曝光标题"},model:{value:e.exposureForm.title,callback:function(t){e.$set(e.exposureForm,"title",t)},expression:"exposureForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"详情"}},[i("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入曝光详情"},model:{value:e.exposureForm.content,callback:function(t){e.$set(e.exposureForm,"content",t)},expression:"exposureForm.content"}})],1),e._v(" "),i("el-form-item",[i("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"text-align":"left"},attrs:{multiple:!0,action:"https://jsonplaceholder.typicode.com/posts/","before-remove":e.beforeRemove,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1}},[i("i",{staticClass:"el-icon-ali-icon-test"}),e._v("附件上传\n                ")])],1)],1),e._v(" "),i("div",{staticClass:"command-mian-body-image"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("确定")])],1)],1)])],1)],1)],1)],1)},[],!1,null,"7b0259d9",null);h.options.__file="exposurestage.vue";t.default=h.exports},rxze:function(e,t,i){"use strict";var n=i("1Cks");i.n(n).a},t0nZ:function(e,t,i){"use strict";var n={name:"LeftTree",data:function(){return{text:"我是子组件向父组件传递参数",msg:{number:60,content:"这是从子组件中传递过来的对象"},defaultProps:{children:"children",label:"label"}}},props:{titleName:{type:String,required:!0},dataArray:{type:Array,required:!0},isShowTabbar:{type:Boolean,required:!0},showCheckbox:{type:Boolean,required:!1,default:!1},panelMinHeight:{type:Number,required:!1,default:81},panelbodyHeight:{type:Number,required:!1,default:86}},mounted:function(){this.$emit("input",this.$refs.tree)},methods:{getMsg:function(){this.$emit("getMsgs",this.msg)},refreshBtn:function(){},addBtn:function(){},deleteBtn:function(){},handleNodeClick:function(e){this.$emit("areaData",e)},checkBoxClick:function(e,t){this.$emit("checkBoxBtn",e,t)}}},a=(i("jatR"),i("KHd+")),r=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel",style:{minHeight:e.panelMinHeight+"vh"}},[i("div",{staticClass:"panelHeading"},[i("div",[i("svg-icon",{attrs:{"icon-class":"tree"}}),e._v(e._s(e.titleName)+"\n    ")],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTabbar,expression:"isShowTabbar"}],staticClass:"btn-group"},[i("button",{staticClass:"btn mini",on:{click:e.refreshBtn}},[i("i",{staticClass:"el-icon-refresh"})]),e._v(" "),i("button",{staticClass:"btn mini",on:{click:e.addBtn}},[i("i",{staticClass:"el-icon-circle-plus"})]),e._v(" "),i("button",{staticClass:"btn mini",on:{click:e.deleteBtn}},[i("i",{staticClass:"el-icon-delete"})])])]),e._v(" "),i("div",{staticClass:"source panel-body",style:{height:"calc("+e.panelbodyHeight+"vh - 41px)"}},[i("el-tree",{ref:"tree",attrs:{data:e.dataArray,props:e.defaultProps,"empty-text":"暂无数据","highlight-current":"","node-key":"id","show-checkbox":e.showCheckbox},on:{"node-click":e.handleNodeClick,check:e.checkBoxClick}})],1)])},[],!1,null,"646fce6a",null);r.options.__file="leftTree.vue";t.a=r.exports}}]);