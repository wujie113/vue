(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f1b4"],{"6DqS":function(t,e,n){},GiAY:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/sys/office/list",method:"get",params:{id:t}})}function o(t){return Object(a.a)({url:"/api/sys/office/childs",method:"get",params:{pid:t}})}},Iwmq:function(t,e,n){"use strict";n.r(e);var a=n("Mz3J"),i=n("t3Un");var o=n("4A2f"),r=n("UjA4"),s=n("vc+U"),l=n("hWHG"),c=n("b/QD"),u={components:{Pagination:a.a,RmDict:o.a,RmOrgSelect:r.a,RmUserSelect:s.a,RmAreaSelect:l.a},filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]}},data:function(){return{v:{form:!1,loading:!1},listLoading:!0,list:null,checked:!1,dataArray:[],defaultProps:{children:"children",label:"label"},lowerofficeList:null,query:{unit:void 0,total:0,pageNo:1,pageSize:10,search:void 0,type:void 0},form:{name:null,phone:null,unit:null,sort:null,state:null},multipleSelection:[]}},created:function(){this.loadLeftTree()},methods:{loadLeftTree:function(){var t=this;Object(c.h)().then(function(e){var n=e.data.list;t.dataArray=n,t.unit=n[0].label,t.companyID=n[0].id,t.getList()}).catch(function(t){console.error("errror:::::::",t)})},getList:function(){var t=this;this.listLoading=!0,console.log("this.query::::",this.query),function(t){return Object(i.a)({url:"/api/sys/addressbook/list",method:"get",params:t})}(this.query).then(function(e){t.listLoading=!1,t.list=e.data.list,t.query.total=e.data.count}),Object(c.d)().then(function(e){t.lowerofficeList=e.data.list})},onlyShowSelectBtn:function(){this.handleNodeClick(this.officeData)},handleNodeClick:function(t){console.log("节点信息",t),this.officeData=t,this.companyID=t.id,this.checked?(this.query.unit=t.id,this.query.areaId=null):(this.query.areaId=t.area.id,this.query.unit=null),this.getList()},searchBtn:function(){this.query.pageNo=1,this.getList()},create:function(){this.v.form=!0,this.form={}},edit:function(t){this.v.form=!0,this.form=t,console.log("this.form",this.form)},save:function(){var t=this;(function(t){return Object(i.a)({url:"/api/sys/addressbook/save",method:"post",data:t})})(this.form).then(function(e){t.v.form=!1,e.success?(t.$message({message:e.msg,type:"success"}),t.list.unshift(t.form)):t.$message({message:e.msg,type:"warning"})})},handleSelectionChange:function(t){this.multipleSelection=t},del:function(){var t=this;if(this.multipleSelection.length>0){var e=[];this.multipleSelection.map(function(t){e.push(t.id)});var n=e.join();this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(i.a)({url:"/api/sys/addressbook/del",method:"post",params:{ids:t}})})(n).then(function(e){t.getList(),t.$message({type:"success",message:e.msg})}).catch(function(e){t.$message({type:"warning",message:e})})}).catch(function(){})}else this.$message({type:"warn",message:"请先勾选!"})}}},d=(n("f/DN"),n("kcg+"),n("KHd+")),m=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}]},[n("el-aside",[n("div",{staticClass:"panel"},[n("div",{staticClass:"panelHeading"},[n("div",[t._v("单位")]),t._v(" "),n("div",[n("el-checkbox",{on:{change:function(e){t.onlyShowSelectBtn()}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("仅显示所选单位")])],1)]),t._v(" "),n("div",{staticClass:"source panel-body"},[n("el-tree",{attrs:{data:t.dataArray,props:t.defaultProps,"empty-text":"暂无数据","highlight-current":""},on:{"node-click":t.handleNodeClick}})],1)])]),t._v(" "),n("el-container",[n("el-header",{attrs:{height:"125px"}},[n("div",{staticClass:"topTitle"},[t._v("通讯录列表")]),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"210px"},attrs:{placeholder:"输入姓名、单位或电话搜索..."},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchBtn(e):null}},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchBtn}},[t._v("查询")])],1)]),t._v(" "),n("el-main",[n("div",{staticClass:"filter-container",staticStyle:{"padding-top":"0"}},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.create}},[t._v("新增")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-delete"},on:{click:t.del}},[t._v("删除")])],1),t._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":"id",stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t._v(" "),n("el-table-column",{attrs:{prop:"unitName",label:"单位"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(n){t.edit(e.row)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.query.total>0,expression:"query.total>0"}],attrs:{total:t.query.total,page:t.query.pageNo,limit:t.query.pageSize},on:{"update:page":function(e){t.$set(t.query,"pageNo",e)},"update:limit":function(e){t.$set(t.query,"pageSize",e)},pagination:t.getList}})],1)])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.v.form,title:"编辑"},on:{"update:visible":function(e){t.$set(t.v,"form",e)}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{attrs:{placeholder:"请输入电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"单位"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择单位",clearable:""},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}},t._l(t.lowerofficeList,function(t){return n("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{attrs:{placeholder:"请输入排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.v.form=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"32e1afa0",null);m.options.__file="addressBook.vue";e.default=m.exports},QXss:function(t,e,n){},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),Math.easeInOutQuad=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function i(t,e,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=t-i,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,i,o,e)),r<e?a(t):n&&"function"==typeof n&&n()}()}},"b/QD":function(t,e,n){"use strict";n.d(e,"j",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"a",function(){return r}),n.d(e,"f",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"i",function(){return f});var a=n("t3Un");function i(t){return Object(a.a)({url:"api/res/management/saveusers",method:"post",data:t})}function o(t){return Object(a.a)({url:"api/res/management/managementuserlist",method:"get",params:t})}function r(t){var e={ids:t};return console.log("params:::",e),Object(a.a)({url:"api/res/management/del",method:"get",params:e})}function s(t){return Object(a.a)({url:"api/res/management/gethzbuserbyareaid",method:"get",params:t})}function l(t){return Object(a.a)({url:"api/res/management/orgusertrees",method:"get",params:t})}function c(t){return Object(a.a)({url:"/api/res/management/orgtreesandusers",method:"get",params:t})}function u(t){return Object(a.a)({url:"/api/res/management/orgtrees",method:"get",params:t})}function d(t){return Object(a.a)({url:"/api/res/management/synerg/office",method:"get",params:t})}function m(t){return Object(a.a)({url:"/api/res/management/loweroffice",method:"get",params:t})}function f(t){return Object(a.a)({url:"/api/sysMsg/saveExposure",method:"post",data:t})}},"f/DN":function(t,e,n){"use strict";var a=n("6DqS");n.n(a).a},iQb1:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/sys/area/tree",method:"get",params:{pid:t}})}},"kcg+":function(t,e,n){"use strict";var a=n("QXss");n.n(a).a}}]);